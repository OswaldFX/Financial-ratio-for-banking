<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Ratio Analyzer</title>
    <!-- Use Tailwind CSS for a modern, clean design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link to the external stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="bg-gray-100 p-8">

    <div class="container">
        <h1 class="text-4xl font-extrabold text-center mb-6 text-blue-800">Bank Financial Ratio Analyzer</h1>
        <p class="text-center text-gray-600 mb-8">Enter the financial ratios for your banks and let the program sort and
            rank them.</p>

        <!-- Input Form Section -->
        <form id="bank-form" class="space-y-6">
            <div id="bank-inputs" class="space-y-4">
                <!-- Initial bank's input row -->
                <div class="input-row p-6 bg-gray-50 rounded-lg shadow-sm">
                    <h2 class="bank-heading text-xl font-bold mb-4 text-blue-600">Bank #1</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <div class="flex flex-col">
                            <label for="bank-name-1" class="text-sm font-medium text-gray-700 mb-1">Bank Name</label>
                            <input type="text" id="bank-name-1" name="name"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="kppm-1" class="text-sm font-medium text-gray-700 mb-1">KPPM (%)</label>
                            <input type="number" step="0.01" id="kppm-1" name="kppm"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="ab-1" class="text-sm font-medium text-gray-700 mb-1">AB (%)</label>
                            <input type="number" step="0.01" id="ab-1" name="ab"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="apb-1" class="text-sm font-medium text-gray-700 mb-1">APB (%)</label>
                            <input type="number" step="0.01" id="apb-1" name="apb"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="ckpn-1" class="text-sm font-medium text-gray-700 mb-1">CKPN (%)</label>
                            <input type="number" step="0.01" id="ckpn-1" name="ckpn"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="npl-gross-1" class="text-sm font-medium text-gray-700 mb-1">NPL Gross
                                (%)</label>
                            <input type="number" step="0.01" id="npl-gross-1" name="npl_gross"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="npl-net-1" class="text-sm font-medium text-gray-700 mb-1">NPL Net (%)</label>
                            <input type="number" step="0.01" id="npl-net-1" name="npl_net"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="roa-1" class="text-sm font-medium text-gray-700 mb-1">ROA (%)</label>
                            <input type="number" step="0.01" id="roa-1" name="roa"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="roe-1" class="text-sm font-medium text-gray-700 mb-1">ROE (%)</label>
                            <input type="number" step="0.01" id="roe-1" name="roe"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="nim-1" class="text-sm font-medium text-gray-700 mb-1">NIM (%)</label>
                            <input type="number" step="0.01" id="nim-1" name="nim"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="bopo-1" class="text-sm font-medium text-gray-700 mb-1">BOPO (%)</label>
                            <input type="number" step="0.01" id="bopo-1" name="bopo"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="cir-1" class="text-sm font-medium text-gray-700 mb-1">CIR (%)</label>
                            <input type="number" step="0.01" id="cir-1" name="cir"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div class="flex flex-col">
                            <label for="ldr-1" class="text-sm font-medium text-gray-700 mb-1">LDR (%)</label>
                            <input type="number" step="0.01" id="ldr-1" name="ldr"
                                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mt-6">
                <button type="button" id="add-row-btn"
                    class="flex-1 px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition-colors">Add
                    Another Bank</button>
                <button type="submit" id="calculate-btn"
                    class="flex-1 px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors">Analyze
                    Banks</button>
            </div>
        </form>

        <!-- Template for new bank input rows -->
        <template id="bank-row-template">
            <div class="input-row p-6 bg-gray-50 rounded-lg shadow-sm mt-4">
                <!-- Wrapper for Bank # heading and the new Delete button -->
                <div class="flex justify-between items-center mb-4">
                    <h2 class="bank-heading text-xl font-bold text-blue-600">Bank #</h2>
                    <button type="button"
                        class="delete-row-btn px-4 py-2 bg-red-500 text-white font-semibold text-sm rounded-lg shadow-md hover:bg-red-600 transition-colors">Delete
                        Bank</button>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <div class="flex flex-col">
                        <label for="bank-name" class="text-sm font-medium text-gray-700 mb-1">Bank Name</label>
                        <input type="text" id="bank-name" name="name"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="kppm" class="text-sm font-medium text-gray-700 mb-1">KPPM (%)</label>
                        <input type="number" step="0.01" id="kppm" name="kppm"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="ab" class="text-sm font-medium text-gray-700 mb-1">AB (%)</label>
                        <input type="number" step="0.01" id="ab" name="ab"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="apb" class="text-sm font-medium text-gray-700 mb-1">APB (%)</label>
                        <input type="number" step="0.01" id="apb" name="apb"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="ckpn" class="text-sm font-medium text-gray-700 mb-1">CKPN (%)</label>
                        <input type="number" step="0.01" id="ckpn" name="ckpn"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="npl-gross" class="text-sm font-medium text-gray-700 mb-1">NPL Gross (%)</label>
                        <input type="number" step="0.01" id="npl-gross" name="npl_gross"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="npl-net" class="text-sm font-medium text-gray-700 mb-1">NPL Net (%)</label>
                        <input type="number" step="0.01" id="npl-net" name="npl_net"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="roa" class="text-sm font-medium text-gray-700 mb-1">ROA (%)</label>
                        <input type="number" step="0.01" id="roa" name="roa"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="roe" class="text-sm font-medium text-gray-700 mb-1">ROE (%)</label>
                        <input type="number" step="0.01" id="roe" name="roe"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="nim" class="text-sm font-medium text-gray-700 mb-1">NIM (%)</label>
                        <input type="number" step="0.01" id="nim" name="nim"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="bopo" class="text-sm font-medium text-gray-700 mb-1">BOPO (%)</label>
                        <input type="number" step="0.01" id="bopo" name="bopo"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="cir" class="text-sm font-medium text-gray-700 mb-1">CIR (%)</label>
                        <input type="number" step="0.01" id="cir" name="cir"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex flex-col">
                        <label for="ldr" class="text-sm font-medium text-gray-700 mb-1">LDR (%)</label>
                        <input type="number" step="0.01" id="ldr" name="ldr"
                            class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                </div>
            </div>
        </template>

        <!-- Loading Indicator -->
        <div id="loading-indicator" class="hidden text-center mt-8">
            <svg class="animate-spin h-8 w-8 text-blue-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
            <p class="mt-2 text-gray-500">Calculating your results...</p>
        </div>

        <!-- Results Section -->
        <div id="results" class="results-container mt-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-3xl font-bold text-blue-800">Ranking Results</h2>
                <button id="show-points-btn"
                    class="hidden px-4 py-2 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-600 transition-colors">Show
                    Points</button>
            </div>
            <p id="error-message" class="text-red-500 mb-4 hidden">An error occurred. Please check your input and try
                again.</p>

            <div class="overflow-x-auto rounded-lg shadow-md">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-blue-500">
                        <tr>
                            <th
                                class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider rounded-tl-lg">
                                Rank</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Bank
                                Name</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">LDR
                                (%)</th>
                            <th id="points-header"
                                class="px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider rounded-tr-lg">
                                Total Points</th>
                        </tr>
                    </thead>
                    <tbody id="results-table-body" class="bg-white divide-y divide-gray-200">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Link to the external JavaScript file -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>